var ESPCR=ESPCR||{};!function(e,t,a,n){"use strict";function i(e,t){var a=Object.prototype.toString,n=a.call({});for(var o in t)t[o]&&n==a.call(t[o])?(e[o]=e[o]||{},i(e[o],t[o])):e[o]=t[o];return e}i(ESPCR,{navbar:{init:function(){e(t).scroll(function(){e(".navbar").offset().top>50?e(".navbar-fixed-top").addClass("top-nav-collapse"):e(".navbar-fixed-top").removeClass("top-nav-collapse")}),e(function(){e("a.page-scroll").bind("click",function(t){var a=e(this);e("html, body").stop().animate({scrollTop:e(a.attr("href").replace("/","")).offset().top-50},1500,"easeInOutExpo"),t.preventDefault()})}),e(".navbar-collapse ul li a").click(function(){e(".navbar-toggle:visible").click()})}}}),i(ESPCR,{customFormElements:{init:function(){e("input[type=checkbox]").addClass("styled").each(function(){e(this).insertBefore(e(this).parent())}),e("input, select").removeAttr("required"),e("#pixeloid_appbundle_eventregistration_song_publish_date").datepicker({language:"hu",format:"yyyy-mm-dd"}),e("#pixeloid_appbundle_eventregistration_video_publish_date").datepicker({language:"hu",format:"yyyy-mm-dd",startDate:"2015-05-01"})}}}),i(ESPCR,{vote:{init:function(){e(".show-video").click(function(t){t.preventDefault();var a=e(this).attr("href");e("#main-modal .modal-content").load(a,function(){e("#main-modal").modal("show"),ESPCR.vote.load()})})},load:function(){function t(e){}function a(t){t.data==YT.PlayerState.ENDED&&e("#player").fadeOut(),t.data==YT.PlayerState.PLAYING&&e(".video-item__btn--close").fadeIn()}console.log("Player ready");var n=new YT.Player("player",{height:e("#player").closest(".video-item").height(),width:e("#player").closest(".video-item").width(),videoId:e("#player").data("video-id"),events:{onReady:t,onStateChange:a}});e(".video-item__btn--play").click(function(t){t.preventDefault(),e("#player").fadeIn(),n.playVideo()}),e(".video-item__btn--close").click(function(t){t.preventDefault(),e("#player").fadeOut(),e(this).fadeOut(),n.stopVideo()});e(".video-item__btn--vote").click(function(t){t.preventDefault();var a=e(this).attr("href");e("#main-modal .modal-content").empty(),e("#main-modal .modal-content").load(a)})}}}),i(ESPCR,{youtubeList:{init:function(){if(!e(".yt-player").length)return!1;var t=[];YTdeferred.done(function(a){function n(e,t,n){return new a.Player(e,{height:t?t:"390",width:1.5*t,videoId:n})}console.log("YTdeferred.done"),e(".yt-player").each(function(){var a=e(this)[0],i=e(this).data("yt"),o=i.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),r=e(this).data("height");t.push(n(a,r,o[1]))})})}}}),i(ESPCR,{youtube:{init:function(){var n=a.createElement("script");n.src="http://youtube.com/iframe_api",n.id="youtubeScript";var i=a.getElementsByTagName("script")[1];i.parentNode.insertBefore(n,i),t.YTdeferred=e.Deferred(),t.onYouTubeIframeAPIReady=function(){console.log("API ready"),YTdeferred.resolve(t.YT)}}}}),e(function(){ESPCR.youtube.init(),ESPCR.navbar.init(),ESPCR.customFormElements.init(),ESPCR.vote.init(),e("#eventregistration_datatable").on("draw.dt",function(){ESPCR.youtubeList.init()})})}(jQuery,this,this.document);